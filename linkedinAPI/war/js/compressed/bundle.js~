function X2JS(y){var D="1.1.5";y=y||{};M();C();function M(){if(y.escapeMode===undefined){y.escapeMode=true}y.attributePrefix=y.attributePrefix||"_";y.arrayAccessForm=y.arrayAccessForm||"none";y.emptyNodeForm=y.emptyNodeForm||"text";if(y.enableToStringFunc===undefined){y.enableToStringFunc=true}y.arrayAccessFormPaths=y.arrayAccessFormPaths||[];if(y.skipEmptyTextNodesForObj===undefined){y.skipEmptyTextNodesForObj=true}if(y.stripWhitespaces===undefined){y.stripWhitespaces=true}y.datetimeAccessFormPaths=y.datetimeAccessFormPaths||[]}var N={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function C(){function a(b){var c=String(b);if(c.length===1){c="0"+c}return c}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}}if(typeof Date.prototype.toISOString!=="function"){Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}}function A(a){var b=a.localName;if(b==null){b=a.baseName}if(b==null||b==""){b=a.nodeName}return b}function F(a){return a.prefix}function E(a){if(typeof(a)=="string"){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}else{return a}}function K(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function I(e,d,b){switch(y.arrayAccessForm){case"property":if(!(e[d] instanceof Array)){e[d+"_asArray"]=[e[d]]}else{e[d+"_asArray"]=e[d]}break}if(!(e[d] instanceof Array)&&y.arrayAccessFormPaths.length>0){var a=0;for(;a<y.arrayAccessFormPaths.length;a++){var c=y.arrayAccessFormPaths[a];if(typeof c==="string"){if(c==b){break}}else{if(c instanceof RegExp){if(c.test(b)){break}}else{if(typeof c==="function"){if(c(e,d,b)){break}}}}}if(a!=y.arrayAccessFormPaths.length){e[d]=[e[d]]}}}function T(d){var b=d.split(/[-T:+Z]/g);var f=new Date(b[0],b[1]-1,b[2]);var c=b[5].split(".");f.setHours(b[3],b[4],c[0]);if(c.length>1){f.setMilliseconds(c[1])}if(b[6]&&b[7]){var e=b[6]*60+Number(b[7]);var a=/\d\d-\d\d:\d\d$/.test(d)?"-":"+";e=0+(a=="-"?-1*e:e);f.setMinutes(f.getMinutes()-e-f.getTimezoneOffset())}else{if(d.indexOf("Z",d.length-1)!==-1){f=new Date(Date.UTC(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds()))}}return f}function G(b,f,d){if(y.datetimeAccessFormPaths.length>0){var e=d.split(".#")[0];var a=0;for(;a<y.datetimeAccessFormPaths.length;a++){var c=y.datetimeAccessFormPaths[a];if(typeof c==="string"){if(c==e){break}}else{if(c instanceof RegExp){if(c.test(e)){break}}else{if(typeof c==="function"){if(c(obj,f,e)){break}}}}}if(a!=y.datetimeAccessFormPaths.length){return T(b)}else{return b}}else{return b}}function x(e,k){if(e.nodeType==N.DOCUMENT_NODE){var j=new Object;var g=e.childNodes;for(var h=0;h<g.length;h++){var f=g.item(h);if(f.nodeType==N.ELEMENT_NODE){var a=A(f);j[a]=x(f,a)}}return j}else{if(e.nodeType==N.ELEMENT_NODE){var j=new Object;j.__cnt=0;var g=e.childNodes;for(var h=0;h<g.length;h++){var f=g.item(h);var a=A(f);if(f.nodeType!=N.COMMENT_NODE){j.__cnt++;if(j[a]==null){j[a]=x(f,k+"."+a);I(j,a,k+"."+a)}else{if(j[a]!=null){if(!(j[a] instanceof Array)){j[a]=[j[a]];I(j,a,k+"."+a)}}(j[a])[j[a].length]=x(f,k+"."+a)}}}for(var d=0;d<e.attributes.length;d++){var c=e.attributes.item(d);j.__cnt++;j[y.attributePrefix+c.name]=c.value}var b=F(e);if(b!=null&&b!=""){j.__cnt++;j.__prefix=b}if(j["#text"]!=null){j.__text=j["#text"];if(j.__text instanceof Array){j.__text=j.__text.join("\n")}if(y.escapeMode){j.__text=K(j.__text)}if(y.stripWhitespaces){j.__text=j.__text.trim()}delete j["#text"];if(y.arrayAccessForm=="property"){delete j["#text_asArray"]}j.__text=G(j.__text,a,k+"."+a)}if(j["#cdata-section"]!=null){j.__cdata=j["#cdata-section"];delete j["#cdata-section"];if(y.arrayAccessForm=="property"){delete j["#cdata-section_asArray"]}}if(j.__cnt==1&&j.__text!=null){j=j.__text}else{if(j.__cnt==0&&y.emptyNodeForm=="text"){j=""}else{if(j.__cnt>1&&j.__text!=null&&y.skipEmptyTextNodesForObj){if((y.stripWhitespaces&&j.__text=="")||(j.__text.trim()=="")){delete j.__text}}}}delete j.__cnt;if(y.enableToStringFunc&&(j.__text!=null||j.__cdata!=null)){j.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}}return j}else{if(e.nodeType==N.TEXT_NODE||e.nodeType==N.CDATA_SECTION_NODE){return e.nodeValue}}}}function H(c,h,d,g){var b="<"+((c!=null&&c.__prefix!=null)?(c.__prefix+":"):"")+h;if(d!=null){for(var f=0;f<d.length;f++){var e=d[f];var a=c[e];if(y.escapeMode){a=E(a)}b+=" "+e.substr(y.attributePrefix.length)+"='"+a+"'"}}if(!g){b+=">"}else{b+="/>"}return b}function L(b,a){return"</"+(b.__prefix!=null?(b.__prefix+":"):"")+a+">"}function B(b,a){return b.indexOf(a,b.length-a.length)!==-1}function z(b,a){if((y.arrayAccessForm=="property"&&B(a.toString(),("_asArray")))||a.toString().indexOf(y.attributePrefix)==0||a.toString().indexOf("__")==0||(b[a] instanceof Function)){return true}else{return false}}function J(b){var c=0;if(b instanceof Object){for(var a in b){if(z(b,a)){continue}c++}}return c}function S(b){var c=[];if(b instanceof Object){for(var a in b){if(a.toString().indexOf("__")==-1&&a.toString().indexOf(y.attributePrefix)==0){c.push(a)}}}return c}function O(b){var a="";if(b.__cdata!=null){a+="<![CDATA["+b.__cdata+"]]>"}if(b.__text!=null){if(y.escapeMode){a+=E(b.__text)}else{a+=b.__text}}return a}function R(b){var a="";if(b instanceof Object){a+=O(b)}else{if(b!=null){if(y.escapeMode){a+=E(b)}else{a+=b}}}return a}function P(c,e,b){var a="";if(c.length==0){a+=H(c,e,b,true)}else{for(var d=0;d<c.length;d++){a+=H(c[d],e,S(c[d]),false);a+=Q(c[d]);a+=L(c[d],e)}}return a}function Q(c){var b="";var g=J(c);if(g>0){for(var a in c){if(z(c,a)){continue}var e=c[a];var d=S(e);if(e==null||e==undefined){b+=H(e,a,d,true)}else{if(e instanceof Object){if(e instanceof Array){b+=P(e,a,d)}else{if(e instanceof Date){b+=H(e,a,d,false);b+=e.toISOString();b+=L(e,a)}else{var f=J(e);if(f>0||e.__text!=null||e.__cdata!=null){b+=H(e,a,d,false);b+=Q(e);b+=L(e,a)}else{b+=H(e,a,d,true)}}}}else{b+=H(e,a,d,false);b+=R(e);b+=L(e,a)}}}}b+=R(c);return b}this.parseXmlString=function(d){var f=window.ActiveXObject||"ActiveXObject" in window;if(d===undefined){return null}var b;if(window.DOMParser){var c=new window.DOMParser();var a=null;if(!f){try{a=c.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(e){a=null}}try{b=c.parseFromString(d,"text/xml");if(a!=null&&b.getElementsByTagNameNS(a,"parsererror").length>0){b=null}}catch(e){b=null}}else{if(d.indexOf("<?")==0){d=d.substr(d.indexOf("?>")+2)}b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(d)}return b};this.asArray=function(a){if(a instanceof Array){return a}else{return[a]}};this.toXmlDateTime=function(a){if(a instanceof Date){return a.toISOString()}else{if(typeof(a)==="number"){return new Date(a).toISOString()}else{return null}}};this.asDateTime=function(a){if(typeof(a)=="string"){return T(a)}else{return a}};this.xml2json=function(a){return x(a)};this.xml_str2json=function(a){var b=this.parseXmlString(a);if(b!=null){return this.xml2json(b)}else{return null}};this.json2xml_str=function(a){return Q(a)};this.json2xml=function(b){var a=this.json2xml_str(b);return this.parseXmlString(a)};this.getVersion=function(){return D}}function createSignmaContainer(){var a=new sigma("container");return a}function plotNodes(){var a=createSignmaContainer();var b=jsonData.person;for(i=1;i<200;i++){a.graph.addNode({id:i.toString(),label:b[i]["first-name"]+"-"+b[i]["last-name"]+"["+b[i]["num-connections"]+"]",x:0+getX(b[i]),y:0+getY(b[i]),size:1,color:"#"+Math.floor(Math.random()*16777215).toString(16)})}a.refresh()}function getX(b){var a=parseInt(b["num-connections"]);console.log(a);if(isNaN(a)){return 500}if(a>450){return genRandom(200,400)}else{if(a>250&&a<400){return genRandom(100,500)}else{if(a>100&&a<250){return genRandom(50,550)}else{if(a<100){return genRandom(0,600)}else{return genRandom(380,400)}}}}}function getY(b){var a=parseInt(b["num-connections"]);console.log(a);if(isNaN(a)){return 500}if(a>450){return genRandom(0,100)}else{if(a>250&&a<400){return genRandom(100,150)}else{if(a>100&&a<250){return genRandom(150,250)}else{if(a<100){return genRandom(250,400)}else{return genRandom(400,500)}}}}}function genRandom(c,a){var b=Math.floor((Math.random()*a)+c);return b+2}function processXHR(b,a){var c=false;if(window.XMLHttpRequest){request=new XMLHttpRequest()}else{if(window.ActiveXObject){request=new ActiveXObject("Msxml2.XMLHTTP")}else{request=new ActiveXObject("Microsoft.XMLHTTP")}}request.onreadystatechange=function(){if(request.readyState==4){console.log("Successful Request");var d=request.responseText;return d}};request.open("POST",a,true);request.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=UTF-8");request.send(b)}function fetchXHRData(){params="clientId="+getClientInfo();connections=processXHR(params,"/fetchConnections.do?");if(connections!=null){jsonData=(new X2JS()).xml_str2json(connections).connections;console.log("data fetched");if(jsonData.person.length>0){plotNodes()}}}function fetchLoginProfile(){params="clientId="+getClientInfo();var a=processXHR(params,"/fetchPeople.do?");console.log(a);jsonData=(new X2JS()).xml_str2json(a)}function getClientInfo(){if(localStorage.getItem("SocialNetworkMapperId")==null){localStorage.setItem("SocialNetworkMapperId",generateUUID());return localStorage.getItem("SocialNetworkMapperId")}else{return localStorage.getItem("SocialNetworkMapperId")}}function generateUUID(){var b=new Date().getTime();var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=(b+Math.random()*16)%16|0;b=Math.floor(b/16);return(e=="x"?d:(d&3|8)).toString(16)});return a}function loadLocalData(){jsonData=(new X2JS()).xml_str2json(localStorage.getItem("connections")).connections};
